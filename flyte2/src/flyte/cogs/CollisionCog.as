package flyte.cogs{	import flash.geom.Rectangle;		import flyte.core.Base;	import flyte.core.Body;	import flyte.core.Static;	import flyte.events.ActionEvent;	import flyte.events.CollisionEvent;
		public class CollisionCog extends BaseCog	{		public var left:Boolean=false		public var right:Boolean=false		public var bottom:Boolean=false		public var top:Boolean=false		public var onStairs:Boolean=false		public function CollisionCog(t:Base)		{			_target = t		}				public function bounds():Rectangle		{			return new Rectangle(target.x,target.y,target.defaults.dimensions.x,target.defaults.dimensions.y)		}		public function test():void		{				var is_collision:Object = {top:false,bottom:false,left:false,right:false}						var test:Array = _target.world.all.statics()			var landOnThis:Static = null			for each(var s:Static in test)			{				if(s.collidesWith(_target))				{					var v:Vector.<Boolean> = s.displace(Body(_target))					if(v[0]) is_collision.right = true					if(v[1]) is_collision.left = true					if(v[2]) is_collision.top = true					if(v[3]) 					{						is_collision.bottom = true						landOnThis = s					}				}			}						if(!is_collision.bottom && this.bottom)			{				onStairs = false				Body(_target).gravity.offGround()				Body(_target).ground = null			}						if(is_collision.bottom && !this.bottom)			{				onStairs = landOnThis.stairMode				Body(_target).landOn(landOnThis)				_target.event.fire(new ActionEvent(ActionEvent.LAND))			}						if(is_collision.right) _target.event.fire(new CollisionEvent(CollisionEvent.RIGHT,'right'))			if(is_collision.left) _target.event.fire(new CollisionEvent(CollisionEvent.LEFT,'left'))			if(is_collision.bottom) _target.event.fire(new CollisionEvent(CollisionEvent.BOTTOM,'bottom'))			this.top = is_collision.top			this.bottom = is_collision.bottom			this.left = is_collision.left			this.right = is_collision.right		}				private function dispatchTest(old:Boolean,newer:Boolean,type:String):void		{			if(old && !newer)			{			}			if(newer && !old)			{			}		}	}}